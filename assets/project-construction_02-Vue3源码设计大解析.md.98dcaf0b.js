import{_ as s,c as n,o as a,Q as l}from"./chunks/framework.5f28ab71.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"project-construction/02-Vue3源码设计大解析.md","lastUpdated":1709451841000}'),p={name:"project-construction/02-Vue3源码设计大解析.md"},e=l(`<h2 id="_02-探索源码设计-vue3-源码设计大解析" tabindex="-1">02-探索源码设计 Vue3 源码设计大解析 <a class="header-anchor" href="#_02-探索源码设计-vue3-源码设计大解析" aria-label="Permalink to &quot;02-探索源码设计 Vue3 源码设计大解析&quot;">​</a></h2><p>我们将要去搭建咱们自己的 <code>vue</code> 框架项目，在搭建的过程中，将会参考 <code>vue</code> 源代码的项目结构与构建方案，从而可以构建出一个 <strong>小而美</strong> 的 <code>vue</code> 框架。</p><h3 id="下载-vue-源代码-版本-v-3-2-37" tabindex="-1">下载 <code>vue</code> 源代码（版本： <code>V 3.2.37</code>） <a class="header-anchor" href="#下载-vue-源代码-版本-v-3-2-37" aria-label="Permalink to &quot;下载 \`vue\` 源代码（版本： \`V 3.2.37\`）&quot;">​</a></h3><p>大家可以点击 <a href="https://github.com/vuejs/core" target="_blank" rel="noreferrer">这里</a> 进入 <code>vue3</code> 源代码的 <code>github</code> 仓库。</p><p>想要下载 <code>vue 源代码</code> 那么主要有三种方式（常用的，忽略了不常用的比如 <code>Github cli</code>）：</p><p>1、直接点击 <code>code -&gt; Download ZIP</code> 进行下载。这样下载下来的代码是 <strong>不包含（这会导致在打包时出现错误）</strong> <code>git</code> 提交记录，仅为当前版本的代码。</p><p>2、点击 <code>code -&gt; 复制 HTTPS || SSH</code> 的 <code>URL</code>，在一个空文件夹中通过 <code>git</code> 指令：</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HTTPS</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/vuejs/core.git</span></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">或者</span></span>
<span class="line"><span style="color:#FFCB6B;">//</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">SSH</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">git@github.com:vuejs/core.git</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>进行获取。</p><p>3、点击 <code>Fork</code> 按钮，<code>Fork</code> 当前的项目到你自己的仓库下，再在你自己的仓库下执行上两步方式进行下载。这样做可以依据当前版本生成自己的代码仓库。</p><h3 id="vue-的源码结构" tabindex="-1"><code>vue</code> 的源码结构 <a class="header-anchor" href="#vue-的源码结构" aria-label="Permalink to &quot;\`vue\` 的源码结构&quot;">​</a></h3><p>下载好 <code>Vue</code> 原代码之后，我们来看下它的基本结构：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">vue</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">next</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">3.2</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">37</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">master</span></span>
<span class="line"><span style="color:#A6ACCD;">├── tsconfig</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">json </span><span style="color:#676E95;font-style:italic;">// TypeScript 配置文件</span></span>
<span class="line"><span style="color:#A6ACCD;">├── rollup</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js </span><span style="color:#676E95;font-style:italic;">// rollup 的配置文件</span></span>
<span class="line"><span style="color:#A6ACCD;">├── packages </span><span style="color:#676E95;font-style:italic;">// 核心代码区</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── vue</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">compat </span><span style="color:#676E95;font-style:italic;">// 用于兼容 vue2 的代码</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── vue </span><span style="color:#676E95;font-style:italic;">// 重要：测试实例、打包之后的 dist 都会放在这里</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── template</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">explorer </span><span style="color:#676E95;font-style:italic;">// 提供了一个线上的测试（https://template-explorer.vuejs.org），用于把 tempalte 转化为 render</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── size</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">check </span><span style="color:#676E95;font-style:italic;">// 测试运行时包大小</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── shared </span><span style="color:#676E95;font-style:italic;">// 重要：共享的工具类</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── sfc</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">playground </span><span style="color:#676E95;font-style:italic;">// sfc 工具，比如：https://sfc.vuejs.org/</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── server</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">renderer </span><span style="color:#676E95;font-style:italic;">// 服务器渲染</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── runtime</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">test </span><span style="color:#676E95;font-style:italic;">// runtime 测试相关</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── runtime</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">dom </span><span style="color:#676E95;font-style:italic;">// 重要：基于浏览器平台的运行时</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── runtime</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">core </span><span style="color:#676E95;font-style:italic;">// 重要：运行时的核心代码，内部针对不同平台进行了实现</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── reactivity</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">transform </span><span style="color:#676E95;font-style:italic;">// 已过期，无需关注</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── reactivity </span><span style="color:#676E95;font-style:italic;">// 重要：响应性的核心模块</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── global</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">d</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ts </span><span style="color:#676E95;font-style:italic;">// 全局的 ts 声明</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── compiler</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">ssr </span><span style="color:#676E95;font-style:italic;">// 服务端渲染的编译模块</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── compiler</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">sfc </span><span style="color:#676E95;font-style:italic;">// 单文件组件（.vue）的编译模块</span></span>
<span class="line"><span style="color:#A6ACCD;">│   ├── compiler</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">dom </span><span style="color:#676E95;font-style:italic;">// 重要：浏览器相关的编译模块</span></span>
<span class="line"><span style="color:#A6ACCD;">│   └── compiler</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">core </span><span style="color:#676E95;font-style:italic;">// 重要：编译器核心代码</span></span>
<span class="line"><span style="color:#A6ACCD;">├── package</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">json </span><span style="color:#676E95;font-style:italic;">// npm 包管理工具</span></span>
<span class="line"><span style="color:#A6ACCD;">├── netlify</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toml </span><span style="color:#676E95;font-style:italic;">// 自动化部署相关</span></span>
<span class="line"><span style="color:#A6ACCD;">├── jest</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js </span><span style="color:#676E95;font-style:italic;">// 测试相关</span></span>
<span class="line"><span style="color:#A6ACCD;">├── api</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">extractor</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">json </span><span style="color:#676E95;font-style:italic;">// TypeScript 的 API 分析工具</span></span>
<span class="line"><span style="color:#A6ACCD;">├── SECURITY</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">md </span><span style="color:#676E95;font-style:italic;">// 报告漏洞，维护安全的声明文件</span></span>
<span class="line"><span style="color:#A6ACCD;">├── README</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">md </span><span style="color:#676E95;font-style:italic;">// 项目声明文件</span></span>
<span class="line"><span style="color:#A6ACCD;">├── LICENSE </span><span style="color:#676E95;font-style:italic;">// 开源协议</span></span>
<span class="line"><span style="color:#A6ACCD;">├── CHANGELOG</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">md </span><span style="color:#676E95;font-style:italic;">// 更新日志</span></span>
<span class="line"><span style="color:#A6ACCD;">├── BACKERS</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">md </span><span style="color:#676E95;font-style:italic;">// 赞助声明</span></span>
<span class="line"><span style="color:#A6ACCD;">├── test</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">dts </span><span style="color:#676E95;font-style:italic;">// 测试相关，不需要关注</span></span>
<span class="line"><span style="color:#A6ACCD;">├── scripts </span><span style="color:#676E95;font-style:italic;">// 配置文件相关，不需要关注</span></span>
<span class="line"><span style="color:#A6ACCD;">├── pnpm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">workspace</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">yaml </span><span style="color:#676E95;font-style:italic;">// pnpm 相关配置</span></span>
<span class="line"><span style="color:#A6ACCD;">└── pnpm</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">lock</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">yaml </span><span style="color:#676E95;font-style:italic;">// 使用 pnpm 下载的依赖包版本</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div>`,13),o=[e];function c(t,r,i,y,C,D){return a(),n("div",null,o)}const b=s(p,[["render",c]]);export{u as __pageData,b as default};
