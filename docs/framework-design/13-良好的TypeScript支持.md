## 13-良好的 `TypeScript` 支持，是如何提供的？

目前在网上对于 `vue3` 的讨论是非常多的，看到过类似的如下内容：

> 说：“vue 3 对 ts 支持比较好，是因为 vue 3 本身是使用 ts 编写的”**（PS：这是一个错误的概念）**

### 良好的 `TypeScript` 支持，是如何提供的？

[typescript（简称：ts）](https://www.typescriptlang.org/) 是微软发布的一个 `js` 的超集，大家可以理解为这是一个包含类型的 `JavaScript`。

我们来看如下通过 `ts`来书写的一个例子：

```ts
/**
 * 使用 ts 声明了一个方法，他期望接受两个数字，并且会返回两者相加的和
 */
function sum(s1: any, s2: any) {
  return s1 + s2;
}

// 触发 sum 方法，但是我们传入了两个字符串
const total = sum("1", "2");
```

以上的代码通过 `ts` 进行编写，我们期望接收的 `s1` 和 `s2` 应该是两个 `number`，并且返回值也应该是一个 `number`。

但是我们却发现，当我们传入了两个字符串时，代码并没有报错，并且会返回一个 `12`。这样的结果将会是一个非常令人疑惑的行为。

接下来我们可以把 `sum` 方法进行一下修改：

```ts
/**
 * 使用 ts 声明了一个方法，他期望接受两个数字，并且会返回两者相加的和
 */
function sum(s1: number, s2: number): number {
  return s1 + s2;
}

// 触发 sum 方法，但是我们传入了两个字符串
const total = sum("1", "2");
```

此时大家就可以发现，在 `sum('1', '2')` 处，会抛出一个错误，它很明确的告诉了我们：**参数应该是一个 `number`**

那么这样的例子告诉了我们：`ts` 编写的程序和 `ts`类型支持友好是两回事情。如果想要让你的程序拥有更好地 `ts` 支持，那么你需要做很多额外的事情。

`vue` 为了拥有良好的 `ts` 类型支持，`vue` 内部其实做了非常多的事情，比如（截图来自：`packages/runtime-core/src/componentPublicInstance.ts` 这样的代码有很多，决不仅限于一个文件）：

![图片描述](https://qn.huat.xyz/mac/202403021749857.jpg)

这些代码存在的目的只是为了进行更好地 `ts` 支持，所以说想要得到一个良好的 `ts` 支持，是需要进行非常多的努力的。
